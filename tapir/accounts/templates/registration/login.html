{% extends "base.html" %}

{% load django_bootstrap5 %}
{% load static %}
{% load i18n %}

{% block head %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static "accounts/css/accounts.css" %}">
{% endblock %}

{% block content %}
    <div class="d-flex justify-content-center supercoop-authentification">
        <div class="card supercoop-login mt-4" id="login-card">
            <h5 class="card-header d-flex justify-content-between align-items-center">
                {% trans "Sign in" %}
            </h5>
            <div class="card-body">
                <form role="form" method="post">
                    {% csrf_token %}
                    {% bootstrap_form form %}
                    <p>
                        <a href="{% url "password_reset" %}">{% trans "Forgot your password?" %}</a>
                    </p>
                    <button type="submit" class="btn tapir-btn btn-primary btn-block"><span
                            class="material-icons">login</span>{% trans "Sign in" %}</button>
                </form>
            </div>
        </div>
    </div>

    <div class="input-group" id="custom_password_group">
        <div class="input-group-append" style="cursor: pointer;">
            <span title="Click here to show/hide password" class="btn btn-outline-secondary tapir-btn form-control" id="password_toggle">
                <i class="material-icons">visibility</i>
            </span>
        </div>
    </div>

    <script>
        const passwordInput = document.getElementById('id_password');
        const customPassword = document.getElementById('custom_password_group');
        passwordInput.parentElement.insertBefore(customPassword, passwordInput);
        customPassword.children[0].insertAdjacentElement("beforebegin", passwordInput);

        document.getElementById('password_toggle').addEventListener('click', () => {
            passwordInput.type = passwordInput.type == 'password' ? 'text' : "password";
        })
    </script>
{% endblock %}
